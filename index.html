<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Enhanced Clicker with Shop</title>
  <style>
    :root {
      --primary: #4a90e2;
      --secondary: #50e3c2;
      --bg-gradient: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
      --card-bg: #ffffff;
      --card-shadow: rgba(0,0,0,0.1);
      --text-color: #333;
    }
    [data-theme="dark"] {
      --primary: #223344;
      --secondary: #334455;
      --bg-gradient: linear-gradient(135deg, #2c3e50 0%, #4c5c6c 100%);
      --card-bg: #2a2a2a;
      --card-shadow: rgba(0,0,0,0.5);
      --text-color: #ddd;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg-gradient);
      display: flex; flex-direction: column; align-items: center;
      min-height: 100vh; color: var(--text-color);
      position: relative;
    }
    .top-bar {
      width: 100%; display: flex; justify-content: flex-end;
      padding: 1rem; gap: 1rem;
    }
    .container {
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 8px 16px var(--card-shadow);
      padding: 2rem; margin: 2rem;
      max-width: 600px; width: 100%;
    }
    #counter {
      font-size: 5rem; margin-bottom: 1rem;
      text-align: center;
      text-shadow: 2px 2px rgba(0,0,0,0.1);
    }
    .controls, .shop-buttons {
      display: flex; gap: 0.75rem;
      flex-wrap: wrap; justify-content: center;
      margin-bottom: 1.5rem;
    }
    button {
      flex: 1 1 120px;
      padding: 0.75rem; font-size: 1rem;
      border: none; border-radius: 8px;
      cursor: pointer;
      background: var(--primary);
      color: #fff;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.1s ease, background 0.2s ease;
    }
    button:hover:not(:disabled) {
      background: var(--secondary);
      transform: translateY(-2px);
    }
    button:disabled { background: #666; cursor: not-allowed; }
    .shop-item {
      background: var(--card-bg);
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      padding: 0.5rem; text-align: center;
      flex: 1 1 100px;
    }
    .info-box {
      background: var(--card-bg);
      color: var(--text-color);
      padding: 1rem; margin: 1rem 0;
      border-radius: 8px;
      box-shadow: 0 4px 8px var(--card-shadow);
      text-align: center;
      font-size: 0.95rem;
    }
    #clickChart {
      max-width: 100%; margin-top: 1rem;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 8px 16px var(--card-shadow);
    }
    #timer {
      position: fixed; bottom: 1rem; right: 1rem;
      background: rgba(0,0,0,0.6); color: #fff;
      padding: 0.5rem 1rem; border-radius: 8px;
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.9rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .credits {
      text-align: center;
      font-size: 0.8rem;
      margin-top: 1rem;
      color: var(--text-color);
    }
    #load-input {
      position: absolute;
      left: -9999px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="top-bar">
    <button id="theme-toggle">Dark Mode</button>
    <button id="save-btn">Save</button>
    <button id="load-btn">Load</button>
    <input type="file" id="load-input" accept="application/json">
  </div>
  <div class="container">
    <div id="counter">0</div>
    <div class="controls">
      <button id="click-btn">Click (+<span id="click-value">1</span>)</button>
      <button id="reset-btn">Reset</button>
    </div>
    <div class="shop">
      <h3>Shop</h3>
      <div class="shop-buttons">
        <div class="shop-item"><button id="buy-2">+2 (50)</button></div>
        <div class="shop-item"><button id="buy-5">+5 (200)</button></div>
        <div class="shop-item"><button id="buy-10">+10 (500)</button></div>
        <div class="shop-item"><button id="buy-20">+20 (2000)</button></div>
        <div class="shop-item"><button id="buy-50">+50 (5000)</button></div>
        <div class="shop-item"><button id="buy-100">+100 (20000)</button></div>
        <div class="shop-item"><button id="buy-1000">+1000 (100000)</button></div>
      </div>
    </div>
    <div class="info-box">
      <strong>About this Clicker Game:</strong> Use the big button to earn coins. Spend coins in the shop to increase your click power and earn more per click. Track your progress on the graph below and see how long you've been playing with the timer.
    </div>
    <canvas id="clickChart" width="400" height="200"></canvas>
    <div class="credits">Made By Morbitz And Applehat.</div>
  </div>
  <div id="timer">Time on site: 00:00:00</div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const body = document.documentElement;
      const themeToggle = document.getElementById('theme-toggle');
      const loadBtn = document.getElementById('load-btn');
      const loadInput = document.getElementById('load-input');

      themeToggle.addEventListener('click', () => {
        const current = body.getAttribute('data-theme');
        const next = current === 'light' ? 'dark' : 'light';
        body.setAttribute('data-theme', next);
        themeToggle.textContent = next === 'light' ? 'Dark Mode' : 'Light Mode';
      });
      loadBtn.addEventListener('click', () => loadInput.click());

      const counterEl = document.getElementById('counter');
      const clickBtn = document.getElementById('click-btn');
      const resetBtn = document.getElementById('reset-btn');
      const clickValueEl = document.getElementById('click-value');
      const timerEl = document.getElementById('timer');
      const chartCtx = document.getElementById('clickChart').getContext('2d');
      const saveBtn = document.getElementById('save-btn');

      const buy2Btn = document.getElementById('buy-2');
      const buy5Btn = document.getElementById('buy-5');
      const buy10Btn = document.getElementById('buy-10');
      const buy20Btn = document.getElementById('buy-20');
      const buy50Btn = document.getElementById('buy-50');
      const buy100Btn = document.getElementById('buy-100');
      const buy1000Btn = document.getElementById('buy-1000');

      let count = 0;
      let clickValue = 1;
      const startTime = Date.now();

      const clickData = { labels: [], datasets: [{ label: 'Coins Over Time', data: [], fill: false, borderColor: 'rgb(75,192,192)', tension: 0.1 }] };
      const clickChart = new Chart(chartCtx, { type: 'line', data: clickData, options: { scales: { x: { title: { display: true, text: 'Clicks' } }, y: { title: { display: true, text: 'Coins' } } } } });

      const upgrades = [
        { btn: buy2Btn, bonus: 2, cost: 50 },
        { btn: buy5Btn, bonus: 5, cost: 200 },
        { btn: buy10Btn, bonus: 10, cost: 500 },
        { btn: buy20Btn, bonus: 20, cost: 2000 },
        { btn: buy50Btn, bonus: 50, cost: 5000 },
        { btn: buy100Btn, bonus: 100, cost: 20000 },
        { btn: buy1000Btn, bonus: 1000, cost: 100000 },
      ];

      function updateDisplay() {
        counterEl.textContent = count;
        clickValueEl.textContent = clickValue;
        upgrades.forEach(u => u.btn.disabled = count < u.cost);
      }

      function updateTimer() {
        const elapsed = Date.now() - startTime;
        const hrs = String(Math.floor(elapsed / 3600000)).padStart(2,'0');
        const mins = String(Math.floor((elapsed % 3600000) / 60000)).padStart(2,'0');
        const secs = String(Math.floor((elapsed % 60000) / 1000)).padStart(2,'0');
        timerEl.textContent = `Time on site: ${hrs}:${mins}:${secs}`;
      }

      function recordClick() {
        clickData.labels.push(clickData.labels.length + 1);
        clickData.datasets[0].data.push(count);
        clickChart.update();
      }

      function saveState() {
        const state = { count, clickValue, data: clickData };
        const blob = new Blob([JSON.stringify(state)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'clicker_save.json'; a.click(); URL.revokeObjectURL(url);
      }

      function loadState(file) {
        const reader = new FileReader();
        reader.onload = () => {
          const state = JSON.parse(reader.result);
          count = state.count;
          clickValue = state.clickValue;
          clickData.labels = state.data.labels || [];
          clickData.datasets[0].data = state.data.datasets[0].data || [];
          clickChart.update();
          updateDisplay();
        };
        reader.readAsText(file);
      }

      clickBtn.addEventListener('click', () => { count += clickValue; updateDisplay(); recordClick(); });
      resetBtn.addEventListener('click', () => { count = 0; clickValue = 1; clickData.labels = []; clickData.datasets[0].data = []; clickChart.update(); updateDisplay(); });
      saveBtn.addEventListener('click', saveState);
      loadInput.addEventListener('change', (e) => { if (e.target.files.length) loadState(e.target.files[0]); });

      upgrades.forEach(u => u.btn.addEventListener('click', () => {
        if (count >= u.cost) { count -= u.cost; clickValue += u.bonus; updateDisplay(); }
      }));

      updateDisplay();
      setInterval(updateTimer, 1000);
    });
  </script>
</body>
</html>
