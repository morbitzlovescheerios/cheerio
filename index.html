<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enhanced Clicker with Shop</title>
  <style>
    /* ...styles as before... */
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <audio id="click-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="purchase-sound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

  <!-- Settings Panel -->
  <button id="settings-btn">⚙️</button>
  <div id="settings-panel">
    <h4>Settings</h4>
    <label><input type="checkbox" id="toggle-animations" checked> Enable Animations</label>
    <label>Reset Behavior:</label>
    <label><input type="radio" name="reset-behavior" value="countOnly" checked> Count Only</label>
    <label><input type="radio" name="reset-behavior" value="countAndClick"> Count & Click Value</label>
    <button id="settings-close">Close</button>
  </div>

  <!-- Top Bar -->
  <div id="purchase-overlay"></div>
  <div class="top-bar" data-theme="light">
    <button id="theme-toggle">🌙</button>
    <button id="save-btn">💾</button>
    <button id="load-btn">📂</button>
    <button id="ach-btn">🏆</button>
    <input type="file" id="load-input" accept="application/json" style="display:none;">
    <button id="daily-btn">🎁 Daily</button>
    <button id="prestige-btn">⭐ Prestige</button>
    <button id="god-btn">👑</button>
  </div>

  <!-- Main Container -->
  <div class="container">
    <div id="counter">0 <button id="mobile-btn">📱</button></div>
    <div class="controls">
      <button id="click-btn">Click (+<span id="click-value">1</span>)</button>
      <button id="autoclick-btn">Buy Auto-Clicker (Cost: <span id="autocost">100</span>)</button>
      <button id="toggle-auto-btn">Pause Auto</button>
      <button id="reset-btn">Reset</button>
      <button id="shop-btn">Shop</button>
    </div>
    <div class="shop" id="shop-section" style="display:none;">
      <h3>Upgrades</h3>
      <div class="shop-buttons" id="shop-buttons"></div>
      <h3>Cosmetics</h3>
      <div class="shop-buttons" id="cosmetics-buttons"></div>
      <button id="reset-bg-btn">Reset BG</button>
    </div>
    <div class="info-box">
      <strong>About:</strong> Click to earn coins, buy auto-clickers, purchase upgrades and cosmetics, claim bonuses, prestige!
    </div>
    <canvas id="clickChart" width="400" height="200"></canvas>
    <div class="achievements" id="achievements"></div>
    <div class="god-panel" id="god-panel">
      <h4>God Mode</h4>
      <label>Counter:<input type="number" id="god-counter"></label>
      <label>Click Value:<input type="number" id="god-click"></label>
      <label>Upgrades JSON:<textarea id="god-upgrades" rows="4"></textarea></label>
      <button id="god-apply">Apply</button>
      <button id="god-cancel">Cancel</button>
    </div>
    <div class="credits">Made By Morbitz And Applehat.</div>
  </div>

  <div id="timer">Time on site: 00:00:00</div>

  <script>
    document.addEventListener('DOMContentLoaded',()=>{
      // -- Elements and State --
      const body = document.documentElement;
      const overlay = document.getElementById('purchase-overlay');
      const settingsBtn = document.getElementById('settings-btn');
      const settingsPanel = document.getElementById('settings-panel');
      const toggleAnimations = document.getElementById('toggle-animations');
      let animations = true;

      // Toggle settings panel
      settingsBtn.onclick = ()=> settingsPanel.style.display = settingsPanel.style.display==='block'?'none':'block';
      document.getElementById('settings-close').onclick = ()=> settingsPanel.style.display='none';
      toggleAnimations.onchange = ()=> animations = toggleAnimations.checked;

      // Core elements
      const counterEl = document.getElementById('counter');
      const mobileBtn = document.getElementById('mobile-btn');
      const clickBtn = document.getElementById('click-btn');
      const autoBtn = document.getElementById('autoclick-btn');
      const toggleAutoBtn = document.getElementById('toggle-auto-btn');
      const autocostEl = document.getElementById('autocost');
      const resetBtn = document.getElementById('reset-btn');
      const shopBtn = document.getElementById('shop-btn');
      const shopSection = document.getElementById('shop-section');
      const shopDiv = document.getElementById('shop-buttons');
      const cosmeticsDiv = document.getElementById('cosmetics-buttons');
      const resetBgBtn = document.getElementById('reset-bg-btn');
      const achievementsDiv = document.getElementById('achievements');
      const timerEl = document.getElementById('timer');
      const themeToggle = document.getElementById('theme-toggle');
      const saveBtn = document.getElementById('save-btn');
      const loadBtn = document.getElementById('load-btn');
      const loadInput = document.getElementById('load-input');
      const achBtn = document.getElementById('ach-btn');
      const dailyBtn = document.getElementById('daily-btn');
      const prestigeBtn = document.getElementById('prestige-btn');
      const godBtn = document.getElementById('god-btn');
      const godPanel = document.getElementById('god-panel');
      const godCounter = document.getElementById('god-counter');
      const godClick = document.getElementById('god-click');
      const godUpgrades = document.getElementById('god-upgrades');
      const godApply = document.getElementById('god-apply');
      const godCancel = document.getElementById('god-cancel');

      let count=0, clickValue=1, autoCount=0, autoCost=100, usedGodMode=false, autoIntervals=[], prestigePoints=0, prestigeMultiplier=1;
      const sessionStart = parseInt(localStorage.getItem('sessionStart')) || Date.now();
      if(!localStorage.getItem('sessionStart')) localStorage.setItem('sessionStart', sessionStart);
      let lastDaily = parseInt(localStorage.getItem('lastDaily'))||0;

      // Chart setup
      const clickData={ labels:[], datasets:[{ label:'Coins', data:[], borderColor:'rgb(75,192,192)', fill:false, tension:0.1 }] };
      const ctx = document.getElementById('clickChart').getContext('2d');
      const chart = new Chart(ctx,{ type:'line', data:clickData, options:{ scales:{ x:{ title:{ display:true, text:'Clicks' }}, y:{ title:{ display:true, text:'Coins'} } } } });

      const upgrades = [ /* 24 upgrade objects */ ];
      const cosmetics = [ /* 7 cosmetics incl pink */ ];
      const achs = [ { name:'Addictive', cond:()=>Date.now()-sessionStart>=3600000 }, { name:'hey stop!', cond:()=>usedGodMode } ];
      let unlocked = new Set();

      // ...renderShop, renderCosmetics, renderAchievements, checkAchievements...

      function updateDisplay(){
        counterEl.firstChild.textContent = count*prestigeMultiplier;
        document.getElementById('click-value').textContent = clickValue*prestigeMultiplier;
        autocostEl.textContent = autoCost;
        chart.update();
      }

      // Timer update
      setInterval(()=>{
        const elapsed = Date.now()-sessionStart;
        const hrs = String(Math.floor(elapsed/3600000)).padStart(2,'0');
        const mins = String(Math.floor((elapsed%3600000)/60000)).padStart(2,'0');
        const secs = String(Math.floor((elapsed%60000)/1000)).padStart(2,'0');
        timerEl.textContent = `Time on site: ${hrs}:${mins}:${secs}`;
      },1000);

      // Achievement button toggle
      achBtn.onclick = ()=> achievementsDiv.style.display = achievementsDiv.style.display==='none'?'block':'none';

      // God mode toggle
      godBtn.onclick = ()=> {
        usedGodMode = true;
        godPanel.style.display = godPanel.style.display==='block'?'none':'block';
      };

      // ...remaining event listeners and logic as before...

      // Initialize state
      // loadState, renderShop, renderCosmetics, updateDisplay, renderAchievements, startAuto...
    });
  </script>
</body>
</html>
