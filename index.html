<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Enhanced Clicker with Shop</title>
  <style>
    :root { --primary:#4a90e2; --secondary:#50e3c2; --bg-gradient:linear-gradient(135deg,#89f7fe 0%,#66a6ff 100%); --card-bg:#fff; --card-shadow:rgba(0,0,0,0.1); --text-color:#333; }
    [data-theme="dark"] { --primary:#223344; --secondary:#334455; --bg-gradient:linear-gradient(135deg,#2c3e50 0%,#4c5c6c 100%); --card-bg:#2a2a2a; --card-shadow:rgba(0,0,0,0.5); --text-color:#ddd; }
    .theme-blue   { --bg-gradient:linear-gradient(135deg,#a8edea 0%,#fed6e3 100%); }
    .theme-red    { --bg-gradient:linear-gradient(135deg,#f093fb 0%,#f5576c 100%); }
    .theme-green  { --bg-gradient:linear-gradient(135deg,#d4fc79 0%,#96e6a1 100%); }
    .theme-yellow { --bg-gradient:linear-gradient(135deg,#fddb92 0%,#d1fdff 100%); }
    .theme-purple { --bg-gradient:linear-gradient(135deg,#e0c3fc 0%,#8ec5fc 100%); }
    .theme-orange { --bg-gradient:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 100%); }
    * { box-sizing: border-box; }
    body { margin:0; padding:0; font-family:'Segoe UI',sans-serif; background:var(--bg-gradient); display:flex; flex-direction:column; align-items:center; min-height:100vh; color:var(--text-color); }
    #settings-btn { position:absolute; top:1rem; left:1rem; background:var(--secondary); border:none; border-radius:50%; width:36px; height:36px; color:#fff; font-size:1.2rem; cursor:pointer; }
    #settings-panel { display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:var(--card-bg); padding:1rem; border-radius:8px; box-shadow:0 8px 24px var(--card-shadow); z-index:100; }
    #settings-panel label { display:block; margin:.5rem 0; }
    .top-bar { width:100%; display:flex; justify-content:flex-end; gap:1rem; padding:1rem; background:rgba(255,255,255,0.8); }
    .top-bar[data-theme="dark"] { background:rgba(0,0,0,0.5); }
    button { padding:.75rem 1rem; font-size:1rem; border:none; border-radius:8px; background:var(--primary); color:#fff; cursor:pointer; transition:transform .1s, background .2s; }
    button:hover:not(:disabled) { background:var(--secondary); transform:translateY(-2px); } button:disabled { background:#666; cursor:not-allowed; }
    .container { background:var(--card-bg); border-radius:12px; box-shadow:0 8px 16px var(--card-shadow); padding:2rem; margin:2rem; max-width:600px; width:100%; position:relative; }
    #counter { font-size:5rem; text-align:center; margin-bottom:1rem; }
    .controls, .shop-buttons { display:flex; gap:.75rem; flex-wrap:wrap; justify-content:center; margin-bottom:1.5rem; }
    .shop-item { background:var(--card-bg); border-radius:8px; box-shadow:0 4px 8px rgba(0,0,0,0.05); padding:.5rem; text-align:center; flex:1 1 100px; }
    .shop-item button { width:100%; }
    .info-box { background:var(--card-bg); color:var(--text-color); padding:1rem; margin:1rem 0; border-radius:8px; box-shadow:0 4px 8px var(--card-shadow); text-align:center; font-size:.95rem; }
    #clickChart { max-width:100%; margin-top:1rem; background:var(--card-bg); border-radius:12px; box-shadow:0 8px 16px var(--card-shadow); }
    #timer { position:fixed; bottom:1rem; right:1rem; background:rgba(0,0,0,0.6); color:#fff; padding:.5rem 1rem; border-radius:8px; font-family:'Courier New', monospace; font-size:.9rem; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
    .credits { text-align:center; font-size:.8rem; margin-top:1rem; color:var(--text-color); }
    #purchase-overlay { position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.8); color:#fff; display:flex; align-items:center; justify-content:center; font-size:3rem; opacity:0; visibility:hidden; transition:opacity .3s; z-index:1000; }
    #purchase-overlay.show { opacity:1; visibility:visible; }
    .achievements { margin-top:1rem; display:none; max-height:200px; overflow-y:auto; }
    .achievement { background:var(--secondary); color:#fff; padding:.5rem; margin:.25rem 0; border-radius:4px; opacity:.9; }
    .god-panel { display:none; position:absolute; top:1rem; left:1rem; background:var(--card-bg); padding:1rem; border-radius:8px; box-shadow:0 4px 8px var(--card-shadow); z-index:100; }
    .god-panel input, .god-panel textarea { width:100%; margin:.25rem 0; padding:.5rem; border:1px solid #ccc; border-radius:4px; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <button id="settings-btn">‚öôÔ∏è</button>
  <div id="settings-panel">
    <h4>Settings</h4>
    <label><input type="checkbox" id="toggle-animations" checked> Enable Animations</label>
    <label>Reset Behavior:</label>
    <label><input type="radio" name="reset-behavior" value="countOnly" checked> Count Only</label>
    <label><input type="radio" name="reset-behavior" value="countAndClick"> Count & Click Value</label>
    <button id="settings-close">Close</button>
  </div>
  <div id="purchase-overlay"></div>
  <div class="top-bar" data-theme="light">
    <button id="theme-toggle">Dark Mode</button>
    <button id="save-btn">üíæ</button>
    <button id="load-btn">üìÇ</button>
    <button id="ach-btn">üèÜ</button>
    <input type="file" id="load-input" accept="application/json" style="display:none;">
    <button id="daily-btn">üéÅ Daily</button>
    <button id="prestige-btn">‚≠ê Prestige</button>
    <button id="god-btn">üëë</button>
  </div>
  <div class="container">
    <div id="counter">0</div>
    <div class="controls">
      <button id="click-btn">Click (+<span id="click-value">1</span>)</button>
      <button id="autoclick-btn">Buy Auto-Clicker (Cost: <span id="autocost">100</span>)</button>
      <button id="toggle-auto-btn">Pause Auto</button>
      <button id="reset-btn">Reset</button>
      <button id="shop-btn">Shop</button>
    </div>
    <div class="shop" id="shop-section" style="display:none;">
      <h3>Upgrades</h3>
      <div class="shop-buttons" id="shop-buttons"></div>
      <h3>Cosmetics</h3>
      <div class="shop-buttons" id="cosmetics-buttons"></div>
      <button id="reset-bg-btn">Reset BG</button>
    </div>
    <div class="info-box">
      <strong>About:</strong> Click to earn coins, buy auto-clickers, purchase upgrades and cosmetics, claim bonuses, prestige!  
    </div>
    <canvas id="clickChart" width="400" height="200"></canvas>
    <div class="achievements" id="achievements"></div>
    <div class="god-panel" id="god-panel">
      <h4>God Mode</h4>
      <label>Counter:<input type="number" id="god-counter"></label>
      <label>Click Value:<input type="number" id="god-click"></label>
      <label>Upgrades JSON:<textarea id="god-upgrades" rows="4"></textarea></label>
      <button id="god-apply">Apply</button>
      <button id="god-cancel">Cancel</button>
    </div>
    <div class="credits">Made By Morbitz And Applehat.</div>
  </div>
  <div id="timer">Time on site: 00:00:00</div>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const body = document.documentElement;
      const overlay = document.getElementById('purchase-overlay');
      const settingsBtn = document.getElementById('settings-btn');
      const settingsPanel = document.getElementById('settings-panel');
      const toggleAnimations = document.getElementById('toggle-animations');
      let animations = true;
      settingsBtn.addEventListener('click', ()=>{
        settingsPanel.style.display = settingsPanel.style.display === 'block' ? 'none' : 'block';
      });
      document.getElementById('settings-close').addEventListener('click', ()=>{
        settingsPanel.style.display = 'none';
      });
      toggleAnimations.addEventListener('change', ()=>{
        animations = toggleAnimations.checked;
      });

      const counterEl = document.getElementById('counter');
      const clickBtn = document.getElementById('click-btn');
      const autoBtn = document.getElementById('autoclick-btn');
      const toggleAutoBtn = document.getElementById('toggle-auto-btn');
      const autocostEl = document.getElementById('autocost');
      const resetBtn = document.getElementById('reset-btn');
      const shopBtn = document.getElementById('shop-btn');
      const shopSection = document.getElementById('shop-section');
      const shopDiv = document.getElementById('shop-buttons');
      const cosmeticsDiv = document.getElementById('cosmetics-buttons');
      const resetBgBtn = document.getElementById('reset-bg-btn');
      const achievementsDiv = document.getElementById('achievements');
      const timerEl = document.getElementById('timer');
      const themeToggle = document.getElementById('theme-toggle');
      const saveBtn = document.getElementById('save-btn');
      const loadBtn = document.getElementById('load-btn');
      const loadInput = document.getElementById('load-input');
      const achBtn = document.getElementById('ach-btn');
      const dailyBtn = document.getElementById('daily-btn');
      const prestigeBtn = document.getElementById('prestige-btn');
      const godBtn = document.getElementById('god-btn');
      const godPanel = document.getElementById('god-panel');
      const godCounter = document.getElementById('god-counter');
      const godClick = document.getElementById('god-click');
      const godUpgrades = document.getElementById('god-upgrades');
      const godApply = document.getElementById('god-apply');
      const godCancel = document.getElementById('god-cancel');

      let count = 0;
      let clickValue = 1;
      let autoCount = 0;
      let autoCost = 100;
      let usedGodMode = false;
      let autoIntervals = [];
      let prestigePoints = 0;
      let prestigeMultiplier = 1;

      const sessionStart = localStorage.getItem('sessionStart') || Date.now();
      if (!localStorage.getItem('sessionStart')) localStorage.setItem('sessionStart', sessionStart);
      const lastDaily = localStorage.getItem('lastDaily') || 0;

      const clickData = { labels: [], datasets: [{ label: 'Coins', data: [], borderColor: 'rgb(75,192,192)', fill: false, tension: 0.1 }] };
      const ctx = document.getElementById('clickChart').getContext('2d');
      const chart = new Chart(ctx, { type: 'line', data: clickData, options: { scales: { x: { title: { display: true, text: 'Clicks' } }, y: { title: { display: true, text: 'Coins' } } } } });

      const upgrades = [/* same array of 24 upgrade objects */];
      const cosmetics = [/* same array of 6 cosmetics with cls */];
      const achs = [
        { name: 'Addictive', cond: ()=>Date.now() - sessionStart >= 3600000 },
        { name: 'hey stop!', cond: ()=>usedGodMode }
      ];
      let unlocked = new Set();

      function showPurchase(msg) {
        if (!animations) return;
        overlay.textContent = msg;
        overlay.classList.add('show');
        setTimeout(()=>overlay.classList.remove('show'),1000);
      }

      function renderShop() {
        shopDiv.innerHTML = '';
        upgrades.forEach(u=>{
          const btn = document.createElement('button');
          btn.textContent = `+${u.bonus} (${u.cost})`;
          btn.disabled = count < u.cost;
          btn.addEventListener('click', ()=>{
            count -= u.cost;
            clickValue += u.bonus;
            updateDisplay();
            saveState();
            showPurchase(`+${u.bonus}!`);
          });
          const d = document.createElement('div'); d.className = 'shop-item'; d.appendChild(btn);
          shopDiv.appendChild(d);
        });
      }

      function renderCosmetics() {
        cosmeticsDiv.innerHTML = '';
        cosmetics.forEach(c=>{
          const btn = document.createElement('button');
          btn.textContent = `${c.name} (${c.cost})`;
          btn.disabled = count < c.cost;
          btn.addEventListener('click', ()=>{
            count -= c.cost;
            body.classList.remove('theme-blue','theme-red','theme-green','theme-yellow','theme-purple','theme-orange');
            body.classList.add(c.cls);
            updateDisplay(); saveState(); showPurchase(c.name);
          });
          const d = document.createElement('div'); d.className = 'shop-item'; d.appendChild(btn);
          cosmeticsDiv.appendChild(d);
        });
      }

      resetBgBtn.addEventListener('click', ()=>{
        body.classList.remove('theme-blue','theme-red','theme-green','theme-yellow','theme-purple','theme-orange');
        saveState();
      });

      function renderAchievements() {
        achievementsDiv.innerHTML = '';
        unlocked.forEach(n=>{
          const d = document.createElement('div'); d.className = 'achievement'; d.textContent = n;
          achievementsDiv.appendChild(d);
        });
      }

      function checkAchievements() {
        achs.forEach(a=>{
          if (a.cond() && !unlocked.has(a.name)) {
            unlocked.add(a.name);
            saveState();
            renderAchievements();
            showPurchase(a.name);
          }
        });
      }

      function updateDisplay() {
        counterEl.textContent = count * prestigeMultiplier;
        document.getElementById('click-value').textContent = clickValue * prestigeMultiplier;
        autocostEl.textContent = autoCost;
        chart.update();
        checkAchievements();
      }

      function saveState() {
        localStorage.setItem('clickerSave', JSON.stringify({
          count, clickValue, autoCount, autoCost, achievements:[...unlocked], usedGodMode, prestigePoints, prestigeMultiplier, bodyClass:body.className, lastDaily
        }));
      }

      function loadState() {
        const s = JSON.parse(localStorage.getItem('clickerSave')||'{}');
        if (s.count != null) {
          count = s.count; clickValue = s.clickValue; autoCount = s.autoCount; autoCost = s.autoCost;
          usedGodMode = s.usedGodMode; prestigePoints = s.prestigePoints; prestigeMultiplier = s.prestigeMultiplier;
          unlocked = new Set(s.achievements||[]);
          body.className = s.bodyClass || body.className;
          lastDaily = s.lastDaily||lastDaily;
        }
        saveState(); updateDisplay(); renderAchievements();
      }

      clickBtn.addEventListener('click', ()=>{ count += clickValue * prestigeMultiplier; clickData.labels.push(clickData.labels.length+1); clickData.datasets[0].data.push(count); updateDisplay(); saveState(); document.getElementById('click-sound').play(); });

      autoBtn.addEventListener('click', ()=>{
        if (count >= autoCost) {
          count -= autoCost;
          autoCount++;
          clearAuto(); startAuto(); updateDisplay(); saveState(); document.getElementById('purchase-sound').play();
        }
      });

      function startAuto(){ clearAuto(); for(let i=0;i<autoCount;i++){ autoIntervals.push(setInterval(()=>{ count += clickValue * prestigeMultiplier; updateDisplay(); saveState(); document.getElementById('click-sound').play(); },1000)); }}
      function clearAuto(){ autoIntervals.forEach(id=>clearInterval(id)); autoIntervals=[]; }
      toggleAutoBtn.addEventListener('click', ()=>{
        if (autoIntervals.length) { clearAuto(); toggleAutoBtn.textContent='Resume Auto'; }
        else { startAuto(); toggleAutoBtn.textContent='Pause Auto'; }
      });

      resetBtn.addEventListener('click', ()=>{
        const b = document.querySelector('input[name="reset-behavior"]:checked').value;
        if (b==='countAndClick') clickValue =1;
        count=0; autoCount=0; autoCost=100; clearAuto(); clickData.labels=[]; clickData.datasets[0].data=[];
        updateDisplay(); saveState(); renderAchievements();
      });

      shopBtn.addEventListener('click', ()=>{
        shopSection.style.display = shopSection.style.display==='none'?'block':'none'; renderShop(); renderCosmetics();
      });

      themeToggle.addEventListener('click', ()=>{
        const t = body.getAttribute('data-theme')==='light'?'dark':'light'; body.setAttribute('data-theme',t);
        themeToggle.textContent = t==='light'?'üåô':'‚òÄÔ∏è'; saveState();
      });

      saveBtn.addEventListener('click', saveState);
      loadBtn.addEventListener('click', loadState);
      achBtn.addEventListener('click', ()=>{ achievementsDiv.style.display = achievementsDiv.style.display==='none'?'block':'none'; });

      document.getElementById('daily-btn').addEventListener('click', ()=>{
        const now = Date.now();
        if (now - lastDaily >= 86400000) {
          count += 1000 * prestigeMultiplier;
          lastDaily = now;
          document.getElementById('purchase-sound').play();
          updateDisplay(); saveState(); showPurchase('Daily Bonus!');
        } else showPurchase('Come back tomorrow!');
      });

      document.getElementById('prestige-btn').addEventListener('click', ()=>{
        if (count >= 100000) {
          prestigePoints++;
          prestigeMultiplier = 1 + prestigePoints*0.1;
          count =0; clickValue=1; autoCount=0; autoCost=100; clearAuto(); clickData.labels=[]; clickData.datasets[0].data=[];
          updateDisplay(); saveState(); showPurchase('Prestiged!');
        } else showPurchase('Need 100k coins to prestige');
      });

      document.getElementById('click-sound').volume = 0.2;
      document.getElementById('purchase-sound').volume = 0.3;

      loadState(); renderShop(); updateDisplay(); renderAchievements(); startAuto();
    });
  </script>
</body>
</html>
